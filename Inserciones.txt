-- Asegurarse de que todas las tablas tienen AUTO_INCREMENT (si no ya lo tienen)
-- Solo muestro un ejemplo para medicamento, aplica igual a las demás tablas
-- ALTER TABLE medicamento MODIFY ID_Medicamento INT AUTO_INCREMENT PRIMARY KEY;

-- 1. Insertar el medicamento
INSERT INTO medicamento (
  Nombre_Medicamento, Imagen, Descripcion_Medicamento, 
  Prescripcion_Medica, IdCategoria, Estado, Requiere_Receta, Id_Proveedor
) VALUES (
  'Paracetamol 500mg', 'paracetamol.jpg', 'Analgésico y antipirético de uso general',
  'No se requiere receta', 1, 1, 0, 1
);
SET @ID_Medicamento := LAST_INSERT_ID();

-- 2. Insertar la dosis para el medicamento
INSERT INTO medicamento_dosis (Dosis, ID_Medicamento)
VALUES ('500mg cada 8 horas', @ID_Medicamento);
SET @ID_Dosis := LAST_INSERT_ID();

-- 3. Insertar la forma farmacéutica para el medicamento
INSERT INTO medicamento_forma_farmaceutica (ID_Medicamento, Forma_Farmaceutica)
VALUES (@ID_Medicamento, 'Tableta');
SET @ID_Forma := LAST_INSERT_ID();

-- 4. Relacionar forma farmacéutica con dosis
INSERT INTO forma_farmaceutica_dosis (ID_Forma_Farmaceutica, ID_Dosis)
VALUES (@ID_Forma, @ID_Dosis);
-- No es necesario guardar ID, salvo que se requiera más adelante

-- 5. Insertar presentación del medicamento
INSERT INTO medicamento_presentacion (ID_Medicamento, Tipo_Presentacion, Total_Presentacion, Precio)
VALUES (@ID_Medicamento, 'Caja x 20 tabletas', 20, 2.50);
SET @ID_Presentacion := LAST_INSERT_ID();

-- 6. Insertar lote del medicamento
INSERT INTO lote (
  Descripcion_Lote, Estado_Lote, Cantidad_Lote,
  Fecha_Fabricacion_Lote, Fecha_Caducidad_Lote, Fecha_Emision_Lote, Fecha_Recibido_Lote,
  Prec_Unidad_Lote, Precio_Total_Lote, ID_Medicamento, Stock_Minimo_Lote, Stock_Maximo_Lote
) VALUES (
  'Lote 2025-A', 'Activo', 1000,
  '2025-01-01 00:00:00', '2026-01-01 00:00:00', '2025-01-15 00:00:00', '2025-01-16 00:00:00',
  0.10, 100.00, @ID_Medicamento, 100, 2000
);
SET @ID_Lote := LAST_INSERT_ID();

-- 7. Asociar presentación con el lote
INSERT INTO lote_presentacion (ID_Lote, ID_Presentacion, Cantidad_Presentacion)
VALUES (@ID_Lote, @ID_Presentacion, 50);
-- SET @ID_Lote_Presentacion := LAST_INSERT_ID(); -- Si necesitas usarlo después

-- 8. Insertar estantería
INSERT INTO estanteria (Nombre_Estanteria)
VALUES ('Estante A');
SET @ID_Estanteria := LAST_INSERT_ID();

-- 9. Insertar posición dentro de la estantería
INSERT INTO posicion_estanteria (ID_Estanteria, Coordenada_X, Coordenada_Y)
VALUES (@ID_Estanteria, 1, 1);
SET @ID_Posicion := LAST_INSERT_ID();

-- 10. Asociar el medicamento a esa posición en estantería
INSERT INTO medicamento_estanteria (
  ID_Medicamento, ID_Posicion, Cantidad_Disponible, Stock_Minimo, Stock_Maximo
) VALUES (
  @ID_Medicamento, @ID_Posicion, 200, 50, 1000
);
-- SET @ID_Medicamento_Estanteria := LAST_INSERT_ID(); -- si necesitas más adelante

-- 11. Insertar en la bodega
INSERT INTO bodega (
  Cantidad_Med_Estante, Cantidad_Total_Bodega,
  Stock_Minimo, Stock_Maximo, ID_Posicion, ID_Medicamento
) VALUES (
  200, 1000, 100, 5000, @ID_Posicion, @ID_Medicamento
);
-- SET @ID_Bodega := LAST_INSERT_ID(); -- si necesitas
